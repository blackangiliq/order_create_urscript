# ๐ ุฏููู ุงูุงุณุชุฎุฏุงู ุงูุชูุตููู

## ๐ ุทุฑู ุงุณุชุฎุฏุงู ุงูุฅุถุงูุฉ

### ุงูุทุฑููุฉ 1๏ธโฃ: ุงูุฅุฑุณุงู ุงูุณุฑูุน (ุฒุฑ ูุจุงุดุฑ)

ุงูุฃุณุฑุน ูุงูุฃุณูู! โจ

1. ุงูุชุญ ุตูุญุฉ Webhooks ูู Salla:
   ```
   https://s.salla.sa/settings/component/webhooks
   ```

2. ุณุชุฌุฏ ุฒุฑ **"ุฅุฑุณุงู Order.Created"** ุจุชุตููู ุฃุฑุฌูุงูู ุฌููู

3. ุงุถุบุท ุนูู ุงูุฒุฑ ูุฑุฉ ูุงุญุฏุฉ

4. ุณูุชู ุฅุฑุณุงู webhook ุชููุงุฆูุงู ุจุงูุจูุงูุงุช:
   - Event: `dashboard::order.created`
   - Version: `2`
   - URL: `https://urscript.shop:3000/webhook`

5. ุณุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ูุณุชูุนุงุฏ ุชุญููู ุงูุตูุญุฉ

---

### ุงูุทุฑููุฉ 2๏ธโฃ: ูู ุฎูุงู Popup ุงูุฅุถุงูุฉ

ููุชุญูู ุงููุงูู ูู URL ๐๏ธ

1. ุงูุชุญ ุตูุญุฉ Webhooks ูู Salla

2. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุฅุถุงูุฉ ูู ุดุฑูุท Chrome

3. ููููู ุชุนุฏูู URL ุฅุฐุง ุฃุฑุฏุช

4. ุงุถุบุท ุฒุฑ **"ุฅุฑุณุงู Webhook"**

5. ุณููุญูุธ URL ุงูุฌุฏูุฏ ุชููุงุฆูุงู ูููุฑุงุช ุงููุงุฏูุฉ

---

### ุงูุทุฑููุฉ 3๏ธโฃ: ุงุณุชุฎุฏุงู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ (ุฌุฏูุฏ!) ๐

ุงูุขู ููููู ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ ุงูุฃุตููุฉ! ๐

1. ุงูุชุญ ุตูุญุฉ Webhooks ูู Salla

2. ุงุถุบุท ุฒุฑ **"ุฅุถุงูุฉ ุฌุฏูุฏ"** (ุงูุฒุฑ ุงูุฃุตูู ูู Salla)

3. ูู modal ุงูุฐู ูุธูุฑ:
   - ุงููุฃ **"ุฅุณู ุงูุญุฏุซ"**: ุงูุชุจ ูุง ุชุฑูุฏ (ูุซู: "ุฅูุดุงุก ุทูุจ")
   - ูู **"ููุน ุงูุญุฏุซ"**: ุณุชุฌุฏ ุฎูุงุฑ ุฌุฏูุฏ ๐ **"ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ (Order Created)"**
   - ุงุฎุชุฑ **ุงูุฅุตุฏุงุฑ v2**
   - ุฃุถู **ุดุฑุท ูุชูุฏู** (ุงุฎุชูุงุฑู)
   - ุฃุฏุฎู **ุฑุงุจุท ุงูุญุฏุซ**: ูุซู `https://urscript.shop:3000/webhook`
   - ููููู ุฅุถุงูุฉ **Request Headers** ุฅุฐุง ุฃุฑุฏุช

4. ุงุถุบุท **"ุญูุธ"**

5. ุชู! โ

**ููุฒุฉ ูุฐู ุงูุทุฑููุฉ:**
- ููููู ุฅุถุงูุฉ ุดุฑูุท ูุชูุฏูุฉ (Rules)
- ููููู ุฅุถุงูุฉ Custom Headers
- ุชุชุญูู ูู ูู ุงูุชูุงุตูู
- ุชุณุชุฎุฏู ุงููุงุฌูุฉ ุงูุฃุตููุฉ ูู Salla

---

## ๐ ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุชุดุฎูุต

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงููุ ุงุณุชุฎุฏู ุฒุฑ **"ุชุดุฎูุต"** ๐๏ธ

### ุฎุทูุงุช ุงูุชุดุฎูุต:

1. ุงูุชุญ ุตูุญุฉ Webhooks

2. ุณุชุฌุฏ ุฒุฑ **"ุชุดุฎูุต"** ุตุบูุฑ ุจุฌุงูุจ ุฒุฑ ุงูุฅุฑุณุงู

3. ุงุถุบุท ุนููู

4. ุณูุธูุฑ ูู:
   - โ ุญุงูุฉ CSRF Token
   - โ ุญุงูุฉ Auth Token
   - ๐ ูุงุฆูุฉ ุจุฌููุน Meta Tags
   - ๐ช ูุงุฆูุฉ ุจุฌููุน Cookies
   - ๐ก ุงูุชุฑุงุญุงุช ููุญููู

5. ุงูุชุญ Console (ุงุถุบุท F12) ูุฑุคูุฉ ุงููุฒูุฏ ูู ุงูุชูุงุตูู

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### โ "ุฎุทุฃ: ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูู tokens ุงููุทููุจุฉ"

**ุงูุญููู:**

1. **ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ** (F5)
   - ุฃุญูุงูุงู ุงูุตูุญุฉ ูุง ุชุญูู ุจุงููุงูู

2. **ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู**
   - ุงูู tokens ุชุธูุฑ ููุท ูููุณุชุฎุฏููู ุงููุณุฌููู

3. **ุงูุณุญ ุงูููููุฒ ูุฃุนุฏ ุชุณุฌูู ุงูุฏุฎูู**
   ```
   Settings โ Privacy โ Clear browsing data โ Cookies
   ```

4. **ุงุณุชุฎุฏู ุฒุฑ "ุชุดุฎูุต"**
   - ุณูุนุทูู ูุนูููุงุช ุฏูููุฉ ุนู ุงููุดููุฉ

5. **ุงูุชุญ Console (F12)**
   - ุณุชุฌุฏ ุฑุณุงุฆู ุชูุตูููุฉ ุชุณุงุนุฏู

---

### โ ุฎุทุฃ 422 (Unprocessable Content)

**ุงูุณุจุจ:** ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุบูุฑ ุตุญูุญุฉ

**ุงูุญู:**
- ุชุฃูุฏ ุฃู ุงูุฅุถุงูุฉ ูุญุฏุซุฉ ูุขุฎุฑ ุฅุตุฏุงุฑ
- Event ูุฌุจ ุฃู ูููู: `dashboard::order.created`
- Version ูุฌุจ ุฃู ูููู: `2`

---

### โ ุงูุฒุฑ ูุง ูุธูุฑ

**ุงูุญููู:**

1. **ุงูุชุธุฑ ููููุงู** (3-5 ุซูุงูู)
   - ุงูุฅุถุงูุฉ ุชุญุงูู ุนุฏุฉ ูุฑุงุช

2. **ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ**

3. **ุชุญูู ูู ุชุซุจูุช ุงูุฅุถุงูุฉ**
   - ุงูุชุญ `chrome://extensions/`
   - ุชุฃูุฏ ุฃู ุงูุฅุถุงูุฉ ููุนููุฉ

4. **ุชุญูู ูู ุงูุตูุญุฉ ุงูุตุญูุญุฉ**
   - ูุฌุจ ุฃู ุชููู ูู:
   ```
   https://s.salla.sa/settings/component/webhooks
   ```

---

### โ order.created ูุง ูุธูุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ

**ุงูุญููู:**

1. **ุฃุบูู ูุฃุนุฏ ูุชุญ Modal**
   - ุงุถุบุท ุนูู ุฒุฑ "ุฅุถุงูุฉ ุฌุฏูุฏ" ูุฑุฉ ุฃุฎุฑู

2. **ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ**
   - ุซู ุงูุชุญ Modal

3. **ุชุญูู ูู Console**
   - ุงูุชุญ F12
   - ุงุจุญุซ ุนู ุฑุณุงูุฉ: `order.created added to dropdown successfully`

---

## ๐ก ูุตุงุฆุญ ูุญูู

### ุชุฎุตูุต URL ุงูุงูุชุฑุงุถู

ุฅุฐุง ููุช ุชุณุชุฎุฏู URL ูุฎุชูู ุฏุงุฆูุงู:

1. ุงูุชุญ Popup ุงูุฅุถุงูุฉ
2. ุบููุฑ URL
3. ุงุถุบุท "ุฅุฑุณุงู Webhook" ูุฑุฉ ูุงุญุฏุฉ
4. ุณููุญูุธ URL ุชููุงุฆูุงู

### ุงุณุชุฎุฏุงู Shุฑูุท ูุชูุฏูุฉ (Rules)

ุฃูุซูุฉ ุนูู ุดุฑูุท ูููุฏุฉ:

```javascript
// ููุท ุงูุทูุจุงุช ุจู Mada ุฃูุซุฑ ูู 100 ุฑูุงู
payment_method = 'mada' AND total > 100

// ููุท Apple Pay ุฃู Mada
payment_method = 'applepay' OR payment_method = 'mada'

// ุงูุทูุจุงุช ุงููุจูุฑุฉ
total > 500

// ุงูุทูุจุงุช ูู ูุฏููุฉ ูุนููุฉ
city = 'ุงูุฑูุงุถ'
```

### ุฅุถุงูุฉ Custom Headers

ูููุฏ ููุชูุซูู:

```
Header Name: X-API-Key
Header Value: your-secret-key-here
```

---

## ๐ ููู ุงูุจูุงูุงุช ุงูููุฑุณูุฉ

ุนูุฏ ุฅุฑุณุงู webhookุ ุณูุตู ูุฎุงุฏูู POST request ุจูุฐุง ุงูุดูู:

### Headers:
```
X-Csrf-Token: DTGev4lpe0eajvFsbEko...
Authorization: Bearer v4.public.eyJ1c2VyIjoxNzQzNTk...
X-Requested-With: XMLHttpRequest
Accept: application/json
Content-Type: multipart/form-data
S-Legacy: true
```

### Body (FormData):
```
_token: DTGev4lpe0eajvFsbEko...
webhook_id: (ูุงุฑุบ ููุฅูุดุงุก ุงูุฌุฏูุฏ)
name: ุงูุดุงุก ุงูุทูุจ
event: dashboard::order.created
version: 2
rule: (ูุงุฑุบ ุฃู ุงูุดุฑุท ุงููุฎุตุต)
url: https://urscript.shop:3000/webhook
```

---

## ๐ ุงูุฃูุงู

### ููุงุญุธุงุช ุฃูุงู ูููุฉ:

1. **ูุง ุชุดุงุฑู ุงูู tokens ูุน ุฃุญุฏ**
   - CSRF Token ุดุฎุตู
   - Auth Token ูุนุทู ุตูุงุญูุงุช ูุงููุฉ

2. **ุงุณุชุฎุฏู HTTPS ุฏุงุฆูุงู**
   - URL ูุฌุจ ุฃู ูุจุฏุฃ ุจู `https://`

3. **ุชุญูู ูู ุงูุจูุงูุงุช ูู ุฎุงุฏูู**
   - ุชุฃูุฏ ุฃู ุงูุทูุจุงุช ูุงุฏูุฉ ูู Salla

4. **ูุง ุชุญูุธ Tokens ูู ูููุงุช**
   - ุงูุฅุถุงูุฉ ุชุญุตู ุนูููุง ุชููุงุฆูุงู

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ุฅุฐุง ุงุญุชุฌุช ูุณุงุนุฏุฉ:

1. **ุงูุฑุฃ ูุฐุง ุงูุฏููู ุฃููุงู** ๐

2. **ุงุณุชุฎุฏู ุฒุฑ "ุชุดุฎูุต"** ๐

3. **ุงูุชุญ Console (F12)** ููุชูุงุตูู ๐๏ธ

4. **GitHub Issues:**
   ```
   https://github.com/blackangiliq/order_create_urscript/issues
   ```

5. **ุชุญูู ูู CHANGELOG** ููุชุญุฏูุซุงุช:
   - ุงูุฑุฃ `CHANGELOG.md`

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุฅุฑุณุงู ูุฎุงุฏู ูุญูู (ููุชุฌุฑุจุฉ)

```
URL: http://localhost:3000/webhook
```

### ูุซุงู 2: ุฅุฑุณุงู ูุฎุงุฏู ูุน Auth

1. ุฃุถู Header:
   ```
   X-API-Key: your-secret-key
   ```

2. ูู ุฎุงุฏููุ ุชุญูู ูู ุงูู Header:
   ```javascript
   if (req.headers['x-api-key'] !== 'your-secret-key') {
     return res.status(401).send('Unauthorized');
   }
   ```

### ูุซุงู 3: ููุชุฑุฉ ููุท ุงูุทูุจุงุช ุงููุจูุฑุฉ

Rule:
```
total > 500
```

---

## ๐ ููุงุญุธุงุช ุฎุชุงููุฉ

- ุงูุฅุถุงูุฉ ุชูุญุฏูุซ ุจุงุณุชูุฑุงุฑ
- ุชุงุจุน GitHub ููุชุญุฏูุซุงุช
- ุงูุชุฑุญ ููุฒุงุช ุฌุฏูุฏุฉ ุนุจุฑ Issues
- ุดุงุฑู ุชุฌุฑุจุชู ูุน ุงูุขุฎุฑูู

**ุจุงูุชูููู! ๐**

---

ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ URScript Team โค๏ธ

